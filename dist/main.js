(()=>{"use strict";const t=(t,e)=>{return{length:(i=t,i<1?1:i>5?5:i),name:e,hits:[],hit(t){this.hits.every((e=>e.toString()!==t))&&this.hits.push(t)},isSunk(){return this.hits.length===this.length}};var i};function e(t,e,i,r){let s=document.createElement(e);return s.classList.add(t),s.textContent=r,i.appendChild(s),s}function i(t,e){let i=!0;return e.forEach((e=>{t.indexOf(e)>-1&&(i=!1)})),i}function r(t,e){this.ship=t,this.position=e}const s=()=>{let t=[];return{gameboard:t,missedShots:[],placeShip(t,e,s){if(!1===function(t,e,r,s){if(r){if(e[0]+(t.length-1)>10||e[0]+(t.length-1)<1)return!1;let r=[];for(let i=0;i<t.length;i++)r.push(`[${e[0]+i}, ${e[1]}]`);return i(s,r)}if(e[1]+(t.length-1)>10||e[1]+(t.length-1)<1)return!1;let n=[];for(let i=0;i<t.length;i++)n.push([e[0],e[1]+i].toString());return i(s,n)}(t,e,s,this.gameboard.map((t=>t.position.toString()))))return!1;if(s){for(let i=0;i<t.length;i++){let s=new r(t,[e[0]+i,e[1]]);this.gameboard.push(s)}return!0}for(let i=0;i<t.length;i++){let s=new r(t,[e[0],e[1]+i]);this.gameboard.push(s)}return!0},recieveAttack(e){let i=this.gameboard.find((t=>t.position.toString()==e.toString())),r=this.gameboard.indexOf(i);if(-1!==r)return t[r].ship.hit(e),t[r].ship.hits;this.recieveMissedHit(e)},recieveMissedHit(t){-1!==this.missedShots.findIndex((e=>e.toString()===t.toString()))||this.missedShots.push(t)},checkAllShipsSunk:()=>t.reduce(((t,e)=>(t.find((t=>t.name===e.ship.name))?e.times++:(e.times=1,t.push(e.ship)),t)),[]).every((t=>!0===t.isSunk()))}};function n(t,e){return Math.floor(Math.random()*(e-t+1)+t)}console.log("working");let a=document.querySelector("body"),h={createStartGameMenu(t){let i=e("start-menu-div","div",t),r=(e("welcome-text","div",i,"Welcome to Battleships"),e("place-text","div",i));e("place-text-p","p",r,"Place your"),e("place-current","p",r),e("roatet-button","button",i,"Rotate"),function(t,e){let i=document.createElement("div");i.setAttribute("id","place-ship-gameboard".toString()),i.classList.add("gameboard-div"),e.appendChild(i);for(let t=1;t<=10;t++)for(let e=1;e<=10;e++){let r=document.createElement("div");r.classList.add("gameboard-tile"),r.setAttribute("data-value",[e,t]),i.appendChild(r)}}(0,i)},createShips(e){e.ships.push(t(5,"Carrier")),e.ships.push(t(4,"Battleship")),e.ships.push(t(3,"Cruiser")),e.ships.push(t(3,"Carrier")),e.ships.push(t(2,"Destroyer"))},enableShipPlacing(){document.querySelector("place-current")}};h.createStartGameMenu(a);let o={name:"player1",ships:[],gameboard:s(),passAttacks:[],attack(t,e){if(this.checkAlreadyHit(t))return!1;this.passAttacks.push(t),e.recieveAttack(t)},randomAttack(t){let e=n(1,10),i=n(1,10),r=[e,i];for(;this.checkAlreadyHit(r);)e=n(1,10),i=n(1,10),r=[e,i];return this.attack(r,t),n(1,10)},checkAlreadyHit(t){return-1!==this.passAttacks.findIndex((e=>e.toString()===t.toString()))}};h.createShips(o)})();